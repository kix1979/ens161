esphome:
  name: esphome-web-0c1ee8
  friendly_name: Air Quality Sensor
  min_version: 2025.11.0
  name_add_mac_suffix: false

esp32:
  variant: esp32
  framework:
    type: esp-idf

# Load custom ENS161 component
external_components:
  - source:
      type: local
      path: components

# I2C Bus A - for ENS161
i2c:
  - id: bus_a
    sda: GPIO21
    scl: GPIO22
    scan: true
    frequency: 400kHz
  
  # I2C Bus B - for PMSA003I
  - id: bus_b
    sda: GPIO25
    scl: GPIO26
    scan: true
    frequency: 400kHz

sensor:
  # ENS161 Air Quality Sensor (on bus_a)
  - platform: ens161
    i2c_id: bus_a
    address: 0x53
    eco2:
      name: "eCO2"
      id: ens161_eco2
      filters:
        - sliding_window_moving_average:
            window_size: 5
            send_every: 1
    tvoc:
      name: "TVOC"
      id: ens161_tvoc
      filters:
        - sliding_window_moving_average:
            window_size: 5
            send_every: 1
    aqi:
      name: "AQI"
      id: ens161_aqi
    hcho:
      name: "Formaldehyde"
      id: ens161_hcho
    update_interval: 15s

  # PMSA003I Particulate Matter Sensor (on bus_b)
  - platform: pmsa003i
    i2c_id: bus_b
    address: 0x12
    pm_1_0:
      name: "PM1.0"
      id: pm1
    pm_2_5:
      name: "PM2.5"
      id: pm25
    pm_10_0:
      name: "PM10"
      id: pm10
    pmc_0_3:
      name: "PM0.3 Count"
    pmc_0_5:
      name: "PM0.5 Count"
    pmc_1_0:
      name: "PM1.0 Count"
    pmc_2_5:
      name: "PM2.5 Count"
    pmc_5_0:
      name: "PM5.0 Count"
    pmc_10_0:
      name: "PM10 Count"
    update_interval: 60s

# Enable logging
logger:

# Enable Home Assistant API
api:

# Allow Over-The-Air updates
ota:
  - platform: esphome

# WiFi configuration
wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password
